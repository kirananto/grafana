<!DOCTYPE html>
<html lang="en">
  <head>
    <script>
      // https://github.com/GoogleChromeLabs/tti-polyfill
      !(function() {
        if ('PerformanceLongTaskTiming' in window) {
          var g = (window.__tti = { e: [] });
          g.o = new PerformanceObserver(function(l) {
            g.e = g.e.concat(l.getEntries());
          });
          g.o.observe({ entryTypes: ['longtask'] });
        }
      })();

    </script>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width" />
    <meta name="theme-color" content="#000" />

    <title>[[.AppTitle]]</title>

    <base href="[[.AppSubUrl]]/" />

    <link
      rel="preload"
      href="public/fonts/roboto/RxZJdnzeo3R5zSexge8UUVtXRa8TVwTICgirnJhmVJw.woff2"
      as="font"
      crossorigin
    />

    <link rel="icon" type="image/png" href="[[.FavIcon]]" />
    <link rel="apple-touch-icon" sizes="180x180" href="[[.AppleTouchIcon]]" />
    <link rel="mask-icon" href="public/img/grafana_mask_icon.svg" color="#6866bb" />

    <link rel="stylesheet" href="public/build/grafana.[[ .Theme ]].<%= webpack.hash %>.css" />

    <script>
      performance.mark('css done blocking');
    </script>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="msapplication-TileColor" content="#2b5797" />
    <meta name="msapplication-config" content="public/img/browserconfig.xml" />
  </head>

  <body class="theme-[[ .Theme ]] [[.AppNameBodyClass]]">
    <style>
      .preloader {
        height: 100%;
        flex-direction: column;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .preloader__enter {
        opacity: 0;
        animation-name: preloader-fade-in;
        animation-iteration-count: 1;
        animation-duration: 0.9s;
        animation-delay: 1.35s;
        animation-fill-mode: forwards;
      }

      .preloader__bounce {
        text-align: center;
        animation-name: preloader-bounce;
        animation-duration: 0.9s;
        animation-iteration-count: infinite;
      }

      .preloader__logo {
        display: inline-block;
        animation-name: preloader-squash;
        animation-duration: 0.9s;
        animation-iteration-count: infinite;
        width: 60px;
        height: 60px;
        background-repeat: no-repeat;
        background-size: contain;
        background-image: url("data:image/png;base64,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");
      }

      .preloader__text {
        margin-top: 16px;
        font-weight: 500;
        font-size: 14px;
        font-family: Sans-serif;
        opacity: 0;
        animation-name: preloader-fade-in;
        animation-duration: 0.9s;
        animation-delay: 1.8s;
        animation-fill-mode: forwards;
      }

      .theme-light .preloader__text {
        color: #52545c;
      }

      .theme-dark .preloader__text {
        color: #d8d9da;
      }

      @keyframes preloader-fade-in {
        0% {
          opacity: 0;
          /*animation-timing-function: linear;*/
          animation-timing-function: cubic-bezier(0, 0, 0.5, 1);
        }
        100% {
          opacity: 1;
        }
      }

      @keyframes preloader-bounce {
        from,
        to {
          transform: translateY(0px);
          animation-timing-function: cubic-bezier(0.3, 0, 0.1, 1);
        }
        50% {
          transform: translateY(-50px);
          animation-timing-function: cubic-bezier(0.9, 0, 0.7, 1);
        }
      }

      @keyframes preloader-squash {
        0% {
          transform: scaleX(1.3) scaleY(0.8);
          animation-timing-function: cubic-bezier(0.3, 0, 0.1, 1);
          transform-origin: bottom center;
        }
        15% {
          transform: scaleX(0.75) scaleY(1.25);
          animation-timing-function: cubic-bezier(0, 0, 0.7, 0.75);
          transform-origin: bottom center;
        }
        55% {
          transform: scaleX(1.05) scaleY(0.95);
          animation-timing-function: cubic-bezier(0.9, 0, 1, 1);
          transform-origin: top center;
        }
        95% {
          transform: scaleX(0.75) scaleY(1.25);
          animation-timing-function: cubic-bezier(0, 0, 0, 1);
          transform-origin: bottom center;
        }
        100% {
          transform: scaleX(1.3) scaleY(0.8);
          transform-origin: bottom center;
          animation-timing-function: cubic-bezier(0, 0, 0.7, 1);
        }
      }

      /* Fail info */
      .preloader__text--fail {
        display: none;
      }

      /* stop logo animation */
      .preloader--done .preloader__bounce,
      .preloader--done .preloader__logo {
        animation-name: none;
        display: none;
      }

      .preloader--done .preloader__logo,
      .preloader--done .preloader__text {
        display: none;
        color: #ff5705 !important;
        font-size: 15px;
      }

      .preloader--done .preloader__text--fail {
        display: block;
      }

      [ng\:cloak],
      [ng-cloak],
      .ng-cloak {
        display: none !important;
      }
    </style>

    <div class="preloader">
      <div class="preloader__enter">
        <div class="preloader__bounce">
          <div class="preloader__logo"></div>
        </div>
      </div>
      <div class="preloader__text">Loading Esper Telemetry</div>
      <div class="preloader__text preloader__text--fail">
        <p>
          <strong>If you're seeing this Esper Telemetry has failed to load its application files</strong>
          <br />
          <br />
        </p>
        <p>
          1. This could be caused by your reverse proxy settings.<br /><br />
          2. If you host grafana under subpath make sure your grafana.ini root_url setting includes subpath<br />
          <br />
          3. If you have a local dev build make sure you build frontend using: yarn start, yarn start:hot, or yarn
          build<br />
          <br />
          4. Sometimes restarting telemetry-server can help<br />
        </p>
      </div>
    </div>

    <grafana-app class="grafana-app" ng-cloak>
      <sidemenu class="sidemenu"></sidemenu>
      <app-notifications-list class="page-alert-list"></app-notifications-list>
      <search-wrapper></search-wrapper>

      <div class="main-view">
				<div ng-view class="scroll-canvas"></div>
      </div>
    </grafana-app>

    <script>
        window.grafanaBootData = {
          user: [[.User]],
          settings: [[.Settings]],
          navTree: [[.NavTree]]
        };

      // In case the js files fails to load the code below will show an info message.
        window.onload = function() {
          var preloader = document.getElementsByClassName("preloader");
          if (preloader.length) {
            preloader[0].className = "preloader preloader--done";
          }
        };
    </script>

    [[if .GoogleTagManagerId]]
    <!-- Google Tag Manager -->
    <script>
      dataLayer = [
        {
          IsSignedIn: '[[.User.IsSignedIn]]',
          Email: '[[.User.Email]]',
          Name: '[[.User.Name]]',
          UserId: '[[.User.Id]]',
          OrgId: '[[.User.OrgId]]',
          OrgName: '[[.User.OrgName]]',
        },
      ];
    </script>
    <noscript>
      <iframe
        src="//www.googletagmanager.com/ns.html?id=[[.GoogleTagManagerId]]"
        height="0"
        width="0"
        style="display:none;visibility:hidden"
      ></iframe>
    </noscript>
    <script>
      (function(w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', '[[.GoogleTagManagerId]]');
    </script>
    <!-- End Google Tag Manager -->
    [[end]]

    <%
    for (key in htmlWebpackPlugin.files.chunks) { %><%
      if (htmlWebpackPlugin.files.jsIntegrity) { %>
    <script
      src="<%= htmlWebpackPlugin.files.chunks[key].entry %>"
      type="text/javascript"
      integrity="<%= htmlWebpackPlugin.files.jsIntegrity[htmlWebpackPlugin.files.js.indexOf(htmlWebpackPlugin.files.chunks[key].entry)] %>"
      crossorigin="<%= webpackConfig.output.crossOriginLoading %>"></script><%
      } else { %>
    <script src="<%= htmlWebpackPlugin.files.chunks[key].entry %>" type="text/javascript"></script><%
      } %><%
    } %>
    <script>
      performance.mark('js done blocking');
    </script>
  </body>
</html>
